#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const chalk = require('chalk');
const { homedir } = require('os');

const { flagThrown } = require(path.join(__dirname,'..','src','utils'));
const { progInfo } = require(path.join(__dirname, '..','src','format'));
const nodeHelp = require(path.join(__dirname, '..', 'src'));
const args = process.argv.slice(2);

const [ help, info, update ] = ['help', 'info', 'update'].map(flagName => flagThrown(args, flagName));

const helpText = `
${chalk.green('node-help')} [options]

${chalk.blue('Options')}:
  -i, --info        Output Information about node-help and exit
  -u, --update      Manually check for updates to Node.js documentation.
`;

if (help) {
    console.log(helpText);
    process.exit(0);
}

if (info) {
    const pkgJson = fs.readFileSync(path.join(__dirname, '..','package.json'));
    console.log(progInfo(JSON.parse(pkgJson)));
    process.exit(0);
}


const options = { update };

nodeHelp(options);
