#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const chalk = require('chalk');
const { homedir } = require('os');
const { progInfo } = require(path.join(__dirname, '..', 'src', 'format'));
const nodeHelp = require(path.join(__dirname, '..', 'src'));

const helpText = `
${chalk.green('node-help')} [options]

${chalk.blue('Options')}:
  -i, --info        Output Information about node-help and exit
  -u, --update      Manually check for updates to Node.js documentation.
  -n, --no-run      Don't run node help after checking for updates.
`;

if (process.argv.includes('--help') || process.argv.includes('-h')) {
    console.log(helpText);
    process.exit(0);
}

if (process.argv.includes('--info') || process.argv.includes('-i')) {
    const pkgJson = fs.readFileSync(path.join(__dirname, '..','package.json'));
    console.log(progInfo(JSON.parse(pkgJson)));
    process.exit(0);
}


const options = {
    update: process.argv.includes('--update') || process.argv.includes('-u'), 
    noRun: process.argv.includes('--no-run') || process.argv.includes('-n')
};

nodeHelp(options);
