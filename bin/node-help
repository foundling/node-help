#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const chalk = require('chalk');
const { homedir } = require('os');

const { flagThrown } = require(path.join(__dirname,'..','src','utils'));
const { progInfo } = require(path.join(__dirname, '..','src','format'));
const nodeHelp = require(path.join(__dirname, '..', 'src'));
const args = process.argv.slice(2);

const helpText = `
${chalk.green('node-help')} [options]

${chalk.blue('Options')}:
  -i, --info        Output Information about node-help and exit
  -u, --update      Manually check for updates to Node.js documentation.
`;

if (flagThrown(args, 'help')) {
    console.log(helpText);
    process.exit(0);
}

if (flagThrown(args, 'info')) {
    const pkgJson = fs.readFileSync(path.join(__dirname, '..','package.json'));
    console.log(progInfo(JSON.parse(pkgJson)));
    process.exit(0);
}

// we check for 'update' flag inside init module
nodeHelp();
